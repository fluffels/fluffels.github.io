<html lang="en">
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <title>
            Quake Sky
        </title>
        <style type="text/css">
            body {
                font-family: Helvetica, Arial, sans-serif;
                background-color: #eee8d5;
                color: #073642;
                max-width: 800px;
                margin-left: auto;
                margin-right: auto;
            }

            a {
                color: #268bd2;
                text-decoration: none;
            }

            a:visited {
                color: #268bd2;
            }

            a:hover {
                color: #268bd2;
                text-decoration: underline;
            }

            p {
                text-align: justify;
            }
        </style>
    </head>
    <body>
        <h1>Quake Sky</h1>
        <p>
            Recently I've been working on a <a href="https://github.com/fluffels/kwark">Quake BSP renderer</a>.
            I've been trying to reverse engineer as much as I can from descriptions of the Quake engine found on the internet.
            One thing that's not described very well is how Quake handles the sky.
            This post will describe how this is implemented in other engines and how I ended up implementing it.
        </p>
        <p>
            First a video of how it should look.
            This is taken from the intro level in <a href="https://github.com/Novum/vkQuake">vkQuake</a>.
        </p>
        <video controls width="800">
            <source src="https://media.githubusercontent.com/media/fluffels/fluffels.github.io/master/vkquake_sky.webm" type="video/webm">
            Sorry, your browser doesn't support embedded videos.
        </video>
        <p>
            RenderDoc shows roughly how the level is rendered.
        </p>
        <video controls width="800">
            <source src="https://media.githubusercontent.com/media/fluffels/fluffels.github.io/master/vkquake_sky_rd.webm" type="video/webm">
            Sorry, your browser doesn't support embedded videos.
        </video>
        <p>
            The provoking vertices for the sky look like this:
        </p>
        <img src="https://media.githubusercontent.com/media/fluffels/fluffels.github.io/master/sky_geom_rd.jpeg" />
        <p>
            So the sky is actually just a some polygons that plug the hole where the window / skylight should be.
        </p>
        <p>
            As described <a href="http://www.celephais.net/stuff/texturefaq.htm">here</a> Quake sky textures are 128x256, where the left half is a "front" texture and the right half is a "back" texture.
            Scrolling these textures at different rates gives a <a href="https://en.wikipedia.org/wiki/Parallax">parallax</a> effect that gives the sky some depth.
        </p>
        <p>
            Further, as described <a href="http://www.gamers.org/dEngine/quake/spec/quake-spec34/qkspec_4.htm">here</a> the Sky effect is achieved by pretending the viewer is farther away than they actually are.
        </p>
    </body>
</html>
